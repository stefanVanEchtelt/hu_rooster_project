<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-storage/app-localstorage/app-localstorage-document.html">

<dom-module id="popup-absent">
  <template>
    <style>

      #absent_melden_popup_container {
        display: block; /* Hidden by default */
        position: fixed; /* Stay in place */
        padding-top: 0px;
        z-index: 1; /* Sit on top */
        background-color: white; /* Fallback color */
        border-style: solid;
        border-width: 2px;
        top: 10%;
        left: 20%;
      }

      h1 {
        position: relative;
        padding-left: 10px;
        margin-top: 0px;
        margin-bottom: 0px;
        background-color: #4286f4;
        color: white;
      }

      p {
        margin-top: 0px;
        margin-bottom: 0px;
        margin-left: 10px;
        margin-right: 10px;
      }

      #absent_melden_buttons {
        margin-left: 10px;
        margin-top: 10px;
        margin-bottom: 5px;
      }

      #medischInput {
        display: none;
        margin-top: 5px;
      }

      #andersInput {
        display: none;
        margin-top: 5px;
      }
    </style>
    <!-- <button id="absent_melden_open_button" raised on-click="openHandler">Absent melden</button> -->
    <div id="absent_melden_popup_container">
      <h1>Absent melden</h1>
      <form id="absent_melden_form" onsubmit="return false">
        <p>
          <b>Reden van absentie:</b><br>
          <input type="radio" id="radioZiek" value="nee" raised on-click="ziekHandler" name="absentie_soort">Ziek</input><br>
          <input type="radio" id="radioTandarts" value="nee" raised on-click="tandartsHandler" name="absentie_soort">Tandarts</input><br>
          <input type="radio" id="radioDokter" value="nee" raised on-click="dokterHandler" name="absentie_soort">Dokter</input><br>
          <input type="radio" id="radioAnders" value="nee" raised on-click="andersHandler" name="absentie_soort">Anders, namelijk:</input>
          <input type="text" name="absentie_soort_anders"></input>
        </p>
        <div id="medischInput">
          <p><b>Wanneer is de absentie?</b><br>
          Op: <input type="date" name="medischDatum"><br>
          Van: <input type="time" name="medischTijdBegin"></input> Tot: <input type="time" name="medischTijdEinde">
        </div>
        <div id="andersInput">
          <p><b>Wanneer is de absentie?</b><br>
          Van: <input type="date" id="andersVanafDatum"></input> om: <input type="time" id="andersVanafTijd"></input><br>
          Tot: <input type="date" id="andersTotDatum"></input> om: <input type="time" id="andersTotTijd"></input>
        </div>
        <div id="absent_melden_buttons">
          <button raised on-click="cancelHandler">Annuleren</button>
          <button type="submit" raised on-click="submitHandler">Verzenden</button>
        </div>
      </form>
    </div>
    <app-localstorage-document key="afweziggen" data="{{afweziggen}}"></app-localstorage-document>
  </template>

  <script>
    class PopupAbsent extends Polymer.Element {
      static get is() { return 'popup-absent'; }
      static get properties() {
        return {
          absentDatum: {
            type: Date
          },
          show: {
            type: Boolean,
            value: false,
            observer: '_handel',
          },
          afweziggen: {
            type: Array,
            value: [],
          }
        };
      }

      _handel() {
        console.log("handel");
        if (this.show) {
          this.openHandler();
        } else {
          this.cancelHandler();
        }
      }

      openHandler(event) {
        var popup = this.root.querySelector('#absent_melden_popup_container');
        popup.style.display = "block";
      }

      cancelHandler(event) {
        console.log("cancel");
        this.show = false;
        var popup = this.root.querySelector('#absent_melden_popup_container');
        popup.style.display = "none";
      }

      ziekHandler(event) {
        this.root.querySelector('#medischInput').style.display = "none";
        this.root.querySelector('#andersInput').style.display = "none";
        this.root.querySelector('#radioZiek').value = "ja";
        this.root.querySelector('#radioTandarts').value = "nee";
        this.root.querySelector('#radioDokter').value = "nee";
        this.root.querySelector('#radioAnders').value = "nee";
      }

      tandartsHandler(event) {
          this.root.querySelector('#medischInput').style.display = "block";
          this.root.querySelector('#andersInput').style.display = "none";
          this.root.querySelector('#radioZiek').value = "nee";
          this.root.querySelector('#radioTandarts').value = "ja";
          this.root.querySelector('#radioDokter').value = "nee";
          this.root.querySelector('#radioAnders').value = "nee";
      }

      dokterHandler(event) {
        this.root.querySelector('#medischInput').style.display = "block";
        this.root.querySelector('#andersInput').style.display = "none";
        this.root.querySelector('#radioZiek').value = "nee";
        this.root.querySelector('#radioTandarts').value = "nee";
        this.root.querySelector('#radioDokter').value = "ja";
        this.root.querySelector('#radioAnders').value = "nee";

      }

      andersHandler(event) {
        this.root.querySelector('#medischInput').style.display = "none";
        this.root.querySelector('#andersInput').style.display = "block";
        this.root.querySelector('#radioZiek').value = "nee";
        this.root.querySelector('#radioTandarts').value = "nee";
        this.root.querySelector('#radioDokter').value = "nee";
        this.root.querySelector('#radioAnders').value = "ja";
      }

      submitHandler(event) {
        console.log("ziek");

        // als reden ziek maak lijst met zieken leerlingen
        // anders zet in afweziggen
        this.afweziggen.push({
          naam: "stefan.vanechtelt@student.hu.nl",
          reden: "tandarts",
          van: "",
          tot: "",
        });

        console.log(this.afweziggen);

        // console.log(this.root.querySelector('#radioZiek').value);
        // console.log(this.root.querySelector('#radioTandarts').value);
        // console.log(this.root.querySelector('#radioDokter').value);
        // console.log(this.root.querySelector('#radioAnders').value);
      }
    }

    window.customElements.define(PopupAbsent.is, PopupAbsent);
  </script>
</dom-module>
